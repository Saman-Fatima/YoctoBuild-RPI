name: "Upload SARIF"

# Run workflow each time code is pushed to your repository and on a schedule.
# The scheduled workflow runs every Thursday at 15:45 UTC.
on:
  push:
  schedule:
    - cron: '45 15 * * 4'

jobs:
 
  # Build:
  #   runs-on: self-hosted
  #   steps:
  #     - name: Checkout repository
  #       uses: actions/checkout@v3
  #     - name: Clone submodules
  #       run: git submodule init && git submodule update
  #     - name: Build
  #       run: source sources/poky/oe-init-build-env ./build && bitbake core-image-minimal

  
  # Sarif:
  #   runs-on: self-hosted
  #   permissions:
  #     # required for all workflows
  #     security-events: write
  #     # only required for workflows in private repositories
  #     actions: read
  #     contents: read
  #   steps:
  #     # This step checks out a copy of your repository.
  #     - name: Upload SARIF file
  #       uses: github/codeql-action/upload-sarif@v2
  #       with:
  #         sarif_file: build/cve-output
  #         category: my-analysis-tool
  #     - name: Upload artifacts
  #       run: ls $HOME/build/raspberrypi/build/tmp
  
  Artifacts:
    runs-on: self-hosted
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3
      - name: View sources
        run: ls build
      - uses: actions/upload-artifact@v3
        with:
          name: my-artifact
          path: build/cve-output/bash.sarif
          # path: build/tmp/deploy/images/qemux86-64/bzimage*